var r=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(e,o,t)=>o in e?r(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,c=(r,e)=>{for(var o in e||(e={}))a.call(e,o)&&n(r,o,e[o]);if(t)for(var o of t(e))s.call(e,o)&&n(r,o,e[o]);return r},l=(r,t)=>e(r,o(t)),i=(r,e,o)=>new Promise(((t,a)=>{var s=r=>{try{c(o.next(r))}catch(e){a(e)}},n=r=>{try{c(o.throw(r))}catch(e){a(e)}},c=r=>r.done?t(r.value):Promise.resolve(r.value).then(s,n);c((o=o.apply(r,e)).next())}));import{a as d,u,j as p}from"./index-Dmbrpg-L.js";import{r as m}from"./vendor-C9Evistz.js";import{c as g,q as h,w as j,b as f,a as x}from"./Config-B4Ez2khV.js";function v(){const r=d(),{category:e}=u(),[o,t]=m.useState({products:[],loading:!0,error:null}),a=m.useMemo((()=>{const r=g(x,"productos");return e?h(r,j("category","==",e)):r}),[e]);m.useEffect((()=>{let r=!0;return(()=>{i(this,null,(function*(){if(r){t((r=>l(c({},r),{loading:!0,error:null})));try{const e=yield f(a);if(!r)return;const o=e.docs.map((r=>l(c({},r.data()),{id:r.id})));t({products:o,loading:!1,error:null})}catch(e){console.error("Error fetching products:",e),r&&t({products:[],loading:!1,error:"Error al cargar los productos. Por favor, intente nuevamente."})}}}))})(),()=>{r=!1}}),[a]);const{products:s,loading:n,error:v}=o;return n?p.jsx("main",{className:"contbig loading",children:p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Cargando productos..."})]})}):v?p.jsx("main",{className:"contbig error",children:p.jsxs("div",{className:"error-container",children:[p.jsx("p",{children:v}),p.jsx("button",{onClick:()=>{t((r=>l(c({},r),{loading:!0,error:null})));(()=>{i(this,null,(function*(){try{const r=(yield f(a)).docs.map((r=>l(c({},r.data()),{id:r.id})));t({products:r,loading:!1,error:null})}catch(r){console.error("Error fetching products:",r),t({products:[],loading:!1,error:"Error al cargar los productos. Por favor, intente nuevamente."})}}))})()},children:"Reintentar"})]})}):p.jsxs("main",{className:"contbig",children:[p.jsx("h1",{children:e?`${e}`:"Descubre nuestros productos"}),s&&0!==s.length?p.jsx("section",{className:"prodcards",children:s.map((e=>{var o;return p.jsxs("article",{className:"product-card",children:[p.jsx("div",{className:"img-container",children:p.jsx("img",{src:e.image,alt:e.title,loading:"lazy",onError:r=>{r.target.src="/placeholder-image.jpg"}})}),p.jsxs("div",{className:"product-info",children:[p.jsx("h4",{children:e.title}),p.jsxs("p",{className:"price",children:["$ ",null==(o=e.price)?void 0:o.toLocaleString()]}),p.jsx("button",{onClick:()=>{var o;(o=e.id)&&r(`/product/${o}`)},"aria-label":`Ver detalles de ${e.title}`,children:"Ver detalles"})]})]},e.id)}))}):p.jsx("p",{className:"no-products",children:"No hay productos disponibles en esta categor√≠a."})]})}export{v as default};
