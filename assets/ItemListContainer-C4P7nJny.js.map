{"version":3,"file":"ItemListContainer-C4P7nJny.js","sources":["../../src/components/Catalogo/ItemListContainer.jsx"],"sourcesContent":["import { useNavigate, useParams } from \"react-router-dom\";\nimport './ItemListCont.css'\nimport { useEffect, useState } from \"react\";\nimport { getProducts } from \"../../asyncMock\";\n\nexport default function ProductsComponent() {\n    const navigate = useNavigate();\n    const { category } = useParams();\n    const [state, setState] = useState({\n        products: [],\n        loading: true,\n        error: null\n    });\n\n    useEffect(() => {\n        let mounted = true;\n\n        const fetchProducts = async () => {\n            if (!mounted) return;\n\n            setState(prev => ({ ...prev, loading: true, error: null }));\n            \n            try {\n                const productsData = await getProducts();\n                \n                if (!mounted) return;\n\n                const filteredProducts = category ? \n                    productsData.filter(product => product.category.toLowerCase() === category.toLowerCase()) :\n                    productsData;\n\n                setState({\n                    products: filteredProducts,\n                    loading: false,\n                    error: null\n                });\n            } catch (err) {\n                console.error(\"Error fetching products:\", err);\n                if (mounted) {\n                    setState({\n                        products: [],\n                        loading: false,\n                        error: \"Error al cargar los productos. Por favor, intente nuevamente.\"\n                    });\n                }\n            }\n        };\n\n        fetchProducts();\n\n        return () => {\n            mounted = false;\n        };\n    }, [category]);\n\n    const handleClick = (id) => {\n        if (id) {\n            navigate(`/product/${id}`, { replace: true });\n        }\n    };\n\n    const { products, loading, error } = state;\n\n    if (loading) {\n        return (\n            <main className=\"contbig loading\">\n                <div className=\"loading-container\">\n                    <div className=\"loading-spinner\"></div>\n                    <p>Cargando productos...</p>\n                </div>\n            </main>\n        );\n    }\n\n    if (error) {\n        return (\n            <main className=\"contbig error\">\n                <div className=\"error-container\">\n                    <p>{error}</p>\n                    <button onClick={() => {\n                        setState(prev => ({ ...prev, loading: true, error: null }));\n                        const fetchProducts = async () => {\n                            try {\n                                const productsData = await getProducts();\n                                const filteredProducts = category ? \n                                    productsData.filter(product => product.category.toLowerCase() === category.toLowerCase()) :\n                                    productsData;\n                                setState({\n                                    products: filteredProducts,\n                                    loading: false,\n                                    error: null\n                                });\n                            } catch (err) {\n                                console.error(\"Error fetching products:\", err);\n                                setState({\n                                    products: [],\n                                    loading: false,\n                                    error: \"Error al cargar los productos. Por favor, intente nuevamente.\"\n                                });\n                            }\n                        };\n                        fetchProducts();\n                    }}>\n                        Reintentar\n                    </button>\n                </div>\n            </main>\n        );\n    }\n\n    return (\n        <main className=\"contbig\">\n            <h1>{category ? `${category}` : 'Descubre nuestros productos'}</h1>\n            {!products || products.length === 0 ? (\n                <p className=\"no-products\">No hay productos disponibles en esta categor√≠a.</p>\n            ) : (\n                <section className=\"prodcards\">\n                    {products.map(product => (\n                        <article key={product.id} className=\"product-card\">\n                            <div className=\"img-container\">\n                                <img \n                                    src={product.image} \n                                    alt={product.title}\n                                    loading=\"lazy\"\n                                    onError={(e) => {\n                                        e.target.src = '/placeholder-image.jpg';\n                                    }}\n                                />\n                            </div>\n                            <div className=\"product-info\">\n                                <h4>{product.title}</h4>\n                                <p className=\"price\">$ {product.price?.toLocaleString()}</p>\n                                <button \n                                    onClick={() => handleClick(product.id)}\n                                    aria-label={`Ver detalles de ${product.title}`}\n                                >\n                                    Ver detalles\n                                </button>\n                            </div>\n                        </article>\n                    ))}\n                </section>\n            )}\n        </main>\n    );\n}"],"names":["ProductsComponent","navigate","useNavigate","category","useParams","state","setState","useState","products","loading","error","useEffect","mounted","__async","this","prev","__spreadProps","__spreadValues","productsData","getProducts","filteredProducts","filter","product","toLowerCase","err","console","fetchProducts","className","children","jsxs","jsx","onClick","length","jsxRuntimeExports","map","src","image","alt","title","onError","e","target","_a","price","toLocaleString","id","replace"],"mappings":"8uBAKA,SAAwBA,IACpB,MAAMC,EAAWC,KACXC,SAAEA,GAAaC,KACdC,EAAOC,GAAYC,WAAS,CAC/BC,SAAU,GACVC,SAAS,EACTC,MAAO,OAGXC,EAAAA,WAAU,KACN,IAAIC,GAAU,EAmCd,MAjCsB,MAAYC,EAAAC,KAAA,MAAA,YAC9B,GAAKF,EAAL,CAESN,GAAAS,GAASC,EAAKC,EAAA,CAAA,EAAAF,GAAL,CAAWN,SAAS,EAAMC,MAAO,SAE/C,IACM,MAAAQ,QAAqBC,IAE3B,IAAKP,EAAS,OAEd,MAAMQ,EAAmBjB,EACrBe,EAAaG,QAAkBC,GAAAA,EAAQnB,SAASoB,gBAAkBpB,EAASoB,gBAC3EL,EAEKZ,EAAA,CACLE,SAAUY,EACVX,SAAS,EACTC,MAAO,aAENc,GACGC,QAAAf,MAAM,2BAA4Bc,GACtCZ,GACSN,EAAA,CACLE,SAAU,GACVC,SAAS,EACTC,MAAO,iEAEf,CA1BU,CA4BlB,GAAA,EAEcgB,GAEP,KACOd,GAAA,CAAA,CACd,GACD,CAACT,IAEE,MAMAK,SAAEA,EAAAC,QAAUA,EAASC,MAAAA,GAAUL,EAErC,OAAII,QAEK,OAAK,CAAAkB,UAAU,kBACZC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,oBACXC,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,sBACfG,IAAC,KAAEF,SAAqB,+BAMpClB,QAEK,OAAK,CAAAiB,UAAU,gBACZC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,kBACXC,SAAA,GAAAE,IAAC,KAAGF,SAAMlB,UACT,SAAO,CAAAqB,QAAS,KACJzB,GAAAS,GAASC,EAAKC,EAAA,CAAA,EAAAF,GAAL,CAAWN,SAAS,EAAMC,MAAO,SAC7B,MAAYG,EAAAC,KAAA,MAAA,YAC1B,IACM,MAAAI,QAAqBC,IACrBC,EAAmBjB,EACrBe,EAAaG,QAAkBC,GAAAA,EAAQnB,SAASoB,gBAAkBpB,EAASoB,gBAC3EL,EACKZ,EAAA,CACLE,SAAUY,EACVX,SAAS,EACTC,MAAO,aAENc,GACGC,QAAAf,MAAM,2BAA4Bc,GACjClB,EAAA,CACLE,SAAU,GACVC,SAAS,EACTC,MAAO,iEACV,CAET,GAAA,EACcgB,EAAA,EACfE,SAEH,sBAOZC,KAAC,OAAK,CAAAF,UAAU,UACZC,SAAA,CAAAE,MAAC,KAAI,CAAAF,SAAAzB,EAAW,GAAGA,IAAa,gCAC9BK,GAAgC,IAApBA,EAASwB,OAGlBC,EAAAH,IAAA,UAAA,CAAQH,UAAU,YACdC,SAAApB,EAAS0B,KACNZ,UAAAO,OAAAA,EAAAA,KAAC,UAAyB,CAAAF,UAAU,eAChCC,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,gBACXC,SAAAK,EAAAH,IAAC,MAAA,CACGK,IAAKb,EAAQc,MACbC,IAAKf,EAAQgB,MACb7B,QAAQ,OACR8B,QAAUC,IACNA,EAAEC,OAAON,IAAM,wBAAA,QAI3BN,KAAC,MAAI,CAAAF,UAAU,eACXC,SAAA,GAACE,IAAA,KAAA,CAAIF,WAAQU,UACbT,KAAC,IAAE,CAAAF,UAAU,QAAQC,SAAA,CAAA,KAAG,OAAAc,EAAApB,EAAQqB,YAAO,EAAAD,EAAAE,oBACvCX,EAAAH,IAAC,SAAA,CACGC,QAAS,KA9ErB,IAACc,KA8EsCvB,EAAQuB,KA5E3D5C,EAAS,YAAY4C,IAAM,CAAEC,SAAS,GA4EuB,EACrC,aAAY,mBAAmBxB,EAAQgB,QAC1CV,SAAA,sBAjBKN,EAAQuB,GAqBtB,QAzBPf,IAAA,IAAA,CAAEH,UAAU,cAAcC,SAAA,sDA+B3C"}