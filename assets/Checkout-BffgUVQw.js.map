{"version":3,"file":"Checkout-BffgUVQw.js","sources":["../../src/components/product/Checkout.jsx"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { CartContext } from \"../../context/CartContext\";\nimport { useForm } from \"react-hook-form\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport { db } from '../../Firebase/Config';\nimport './Checkout.css';\n\nconst Checkout = () => {\n    const [pedidoId, setPedidoId] = useState(\"\");\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const { carrito, precioTotal, vaciarCarrito } = useContext(CartContext);\n\n    const { register, handleSubmit, formState: { errors } } = useForm();\n\n    const comprar = async (data) => {\n        setIsSubmitting(true);\n        try {\n            const pedido = {\n                cliente: data,\n                productos: carrito,\n                total: precioTotal(),\n                fecha: new Date().toISOString()\n            };\n\n            const pedidosRef = collection(db, \"pedidos\");\n            const docRef = await addDoc(pedidosRef, pedido);\n            setPedidoId(docRef.id);\n            vaciarCarrito();\n        } catch (error) {\n            console.error(\"Error al procesar el pedido:\", error);\n        } finally {\n            setIsSubmitting(false);\n        }\n    }\n\n    if (pedidoId) {\n        return (\n            <div className=\"checkout-success\">\n                <h1>¡Gracias por tu compra!</h1>\n                <div className=\"success-content\">\n                    <div className=\"success-icon\">✓</div>\n                    <p>Tu pedido ha sido procesado correctamente</p>\n                    <p className=\"order-number\">Número de pedido: <span>{pedidoId}</span></p>\n                    <p className=\"order-info\">Te enviaremos un correo electrónico con los detalles de tu pedido</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"checkout-container\">\n            <h1 className=\"checkout-title\">Finalizar Compra</h1>\n            \n            <div className=\"checkout-content\">\n                <div className=\"checkout-form-container\">\n                    <h2>Información de Contacto</h2>\n                    <form className=\"checkout-form\" onSubmit={handleSubmit(comprar)}>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"nombre\">Nombre completo</label>\n                            <input\n                                id=\"nombre\"\n                                type=\"text\"\n                                placeholder=\"Ingresa tu nombre completo\"\n                                {...register(\"nombre\", {\n                                    required: \"El nombre es requerido\",\n                                    minLength: {\n                                        value: 2,\n                                        message: \"El nombre debe tener al menos 2 caracteres\"\n                                    }\n                                })}\n                            />\n                            {errors.nombre && <span className=\"error-message\">{errors.nombre.message}</span>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"email\">Correo electrónico</label>\n                            <input\n                                id=\"email\"\n                                type=\"email\"\n                                placeholder=\"Ingresa tu correo electrónico\"\n                                {...register(\"email\", {\n                                    required: \"El correo electrónico es requerido\",\n                                    pattern: {\n                                        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                        message: \"Correo electrónico inválido\"\n                                    }\n                                })}\n                            />\n                            {errors.email && <span className=\"error-message\">{errors.email.message}</span>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"telefono\">Teléfono</label>\n                            <input\n                                id=\"telefono\"\n                                type=\"tel\"\n                                placeholder=\"Ingresa tu número de teléfono\"\n                                {...register(\"telefono\", {\n                                    required: \"El teléfono es requerido\",\n                                    pattern: {\n                                        value: /^[0-9\\s\\-\\+]{10,}$/,\n                                        message: \"Número de teléfono inválido\"\n                                    }\n                                })}\n                            />\n                            {errors.telefono && <span className=\"error-message\">{errors.telefono.message}</span>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"direccion\">Dirección de envío</label>\n                            <input\n                                id=\"direccion\"\n                                type=\"text\"\n                                placeholder=\"Ingresa tu dirección completa\"\n                                {...register(\"direccion\", {\n                                    required: \"La dirección es requerida\",\n                                    minLength: {\n                                        value: 10,\n                                        message: \"La dirección debe tener al menos 10 caracteres\"\n                                    }\n                                })}\n                            />\n                            {errors.direccion && <span className=\"error-message\">{errors.direccion.message}</span>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"ciudad\">Ciudad</label>\n                            <input\n                                id=\"ciudad\"\n                                type=\"text\"\n                                placeholder=\"Ingresa tu ciudad\"\n                                {...register(\"ciudad\", {\n                                    required: \"La ciudad es requerida\"\n                                })}\n                            />\n                            {errors.ciudad && <span className=\"error-message\">{errors.ciudad.message}</span>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"codigoPostal\">Código Postal</label>\n                            <input\n                                id=\"codigoPostal\"\n                                type=\"text\"\n                                placeholder=\"Ingresa tu código postal\"\n                                {...register(\"codigoPostal\", {\n                                    required: \"El código postal es requerido\",\n                                    pattern: {\n                                        value: /^[0-9]{5,}$/,\n                                        message: \"Código postal inválido\"\n                                    }\n                                })}\n                            />\n                            {errors.codigoPostal && <span className=\"error-message\">{errors.codigoPostal.message}</span>}\n                        </div>\n\n                        <button \n                            className=\"checkout-button\" \n                            type=\"submit\"\n                            disabled={isSubmitting}\n                        >\n                            {isSubmitting ? 'Procesando...' : 'Finalizar Compra'}\n                        </button>\n                    </form>\n                </div>\n\n                <div className=\"checkout-summary\">\n                    <h2>Resumen del Pedido</h2>\n                    {carrito.map((item) => (\n                        <div key={item.id} className=\"checkout-item\">\n                            <div className=\"checkout-item-info\">\n                                <span className=\"checkout-item-name\">{item.title}</span>\n                                <span className=\"checkout-item-quantity\">x{item.cantidad}</span>\n                            </div>\n                            <span className=\"checkout-item-price\">\n                                ${(item.price * item.cantidad).toLocaleString()}\n                            </span>\n                        </div>\n                    ))}\n                    <div className=\"checkout-total\">\n                        <span className=\"checkout-total-label\">Total</span>\n                        <span className=\"checkout-total-amount\">\n                            ${precioTotal().toLocaleString()}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Checkout;"],"names":["Checkout","pedidoId","setPedidoId","useState","isSubmitting","setIsSubmitting","carrito","precioTotal","vaciarCarrito","useContext","CartContext","register","handleSubmit","formState","errors","useForm","jsxs","className","children","jsx","onSubmit","data","__async","pedido","cliente","productos","total","fecha","Date","toISOString","pedidosRef","collection","db","docRef","addDoc","id","error","console","htmlFor","jsxRuntimeExports","__spreadValues","type","placeholder","required","minLength","value","message","nombre","pattern","email","telefono","direccion","ciudad","codigoPostal","disabled","map","item","title","cantidad","price","toLocaleString"],"mappings":"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"}