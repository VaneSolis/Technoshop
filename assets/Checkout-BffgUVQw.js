var e=Object.defineProperty,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(s,r,a)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,c=(e,c)=>{for(var i in c||(c={}))r.call(c,i)&&o(e,i,c[i]);if(s)for(var i of s(c))a.call(c,i)&&o(e,i,c[i]);return e};import{C as i,j as l}from"./index-E9muRipo.js";import{r as t}from"./vendor-C9Evistz.js";import{u as n}from"./index.esm-Di5Nvi7D.js";import{c as d,a as m,e as u}from"./Config-B4Ez2khV.js";const h=()=>{const[e,s]=t.useState(""),[r,a]=t.useState(!1),{carrito:o,precioTotal:h,vaciarCarrito:p}=t.useContext(i),{register:x,handleSubmit:j,formState:{errors:g}}=n();return e?l.jsxs("div",{className:"checkout-success",children:[l.jsx("h1",{children:"¡Gracias por tu compra!"}),l.jsxs("div",{className:"success-content",children:[l.jsx("div",{className:"success-icon",children:"✓"}),l.jsx("p",{children:"Tu pedido ha sido procesado correctamente"}),l.jsxs("p",{className:"order-number",children:["Número de pedido: ",l.jsx("span",{children:e})]}),l.jsx("p",{className:"order-info",children:"Te enviaremos un correo electrónico con los detalles de tu pedido"})]})]}):l.jsxs("div",{className:"checkout-container",children:[l.jsx("h1",{className:"checkout-title",children:"Finalizar Compra"}),l.jsxs("div",{className:"checkout-content",children:[l.jsxs("div",{className:"checkout-form-container",children:[l.jsx("h2",{children:"Información de Contacto"}),l.jsxs("form",{className:"checkout-form",onSubmit:j((e=>{return r=void 0,c=null,i=function*(){a(!0);try{const r={cliente:e,productos:o,total:h(),fecha:(new Date).toISOString()},a=d(m,"pedidos"),c=yield u(a,r);s(c.id),p()}catch(r){console.error("Error al procesar el pedido:",r)}finally{a(!1)}},new Promise(((e,s)=>{var a=e=>{try{l(i.next(e))}catch(r){s(r)}},o=e=>{try{l(i.throw(e))}catch(r){s(r)}},l=s=>s.done?e(s.value):Promise.resolve(s.value).then(a,o);l((i=i.apply(r,c)).next())}));var r,c,i})),children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nombre",children:"Nombre completo"}),l.jsx("input",c({id:"nombre",type:"text",placeholder:"Ingresa tu nombre completo"},x("nombre",{required:"El nombre es requerido",minLength:{value:2,message:"El nombre debe tener al menos 2 caracteres"}}))),g.nombre&&l.jsx("span",{className:"error-message",children:g.nombre.message})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),l.jsx("input",c({id:"email",type:"email",placeholder:"Ingresa tu correo electrónico"},x("email",{required:"El correo electrónico es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Correo electrónico inválido"}}))),g.email&&l.jsx("span",{className:"error-message",children:g.email.message})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"telefono",children:"Teléfono"}),l.jsx("input",c({id:"telefono",type:"tel",placeholder:"Ingresa tu número de teléfono"},x("telefono",{required:"El teléfono es requerido",pattern:{value:/^[0-9\s\-\+]{10,}$/,message:"Número de teléfono inválido"}}))),g.telefono&&l.jsx("span",{className:"error-message",children:g.telefono.message})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"direccion",children:"Dirección de envío"}),l.jsx("input",c({id:"direccion",type:"text",placeholder:"Ingresa tu dirección completa"},x("direccion",{required:"La dirección es requerida",minLength:{value:10,message:"La dirección debe tener al menos 10 caracteres"}}))),g.direccion&&l.jsx("span",{className:"error-message",children:g.direccion.message})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"ciudad",children:"Ciudad"}),l.jsx("input",c({id:"ciudad",type:"text",placeholder:"Ingresa tu ciudad"},x("ciudad",{required:"La ciudad es requerida"}))),g.ciudad&&l.jsx("span",{className:"error-message",children:g.ciudad.message})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"codigoPostal",children:"Código Postal"}),l.jsx("input",c({id:"codigoPostal",type:"text",placeholder:"Ingresa tu código postal"},x("codigoPostal",{required:"El código postal es requerido",pattern:{value:/^[0-9]{5,}$/,message:"Código postal inválido"}}))),g.codigoPostal&&l.jsx("span",{className:"error-message",children:g.codigoPostal.message})]}),l.jsx("button",{className:"checkout-button",type:"submit",disabled:r,children:r?"Procesando...":"Finalizar Compra"})]})]}),l.jsxs("div",{className:"checkout-summary",children:[l.jsx("h2",{children:"Resumen del Pedido"}),o.map((e=>l.jsxs("div",{className:"checkout-item",children:[l.jsxs("div",{className:"checkout-item-info",children:[l.jsx("span",{className:"checkout-item-name",children:e.title}),l.jsxs("span",{className:"checkout-item-quantity",children:["x",e.cantidad]})]}),l.jsxs("span",{className:"checkout-item-price",children:["$",(e.price*e.cantidad).toLocaleString()]})]},e.id))),l.jsxs("div",{className:"checkout-total",children:[l.jsx("span",{className:"checkout-total-label",children:"Total"}),l.jsxs("span",{className:"checkout-total-amount",children:["$",h().toLocaleString()]})]})]})]})]})};export{h as default};
//# sourceMappingURL=Checkout-BffgUVQw.js.map
